<!-- Cache Bust: 2026-01-26 22:15 -->
<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Santis Club • Products</title>

    <script src="assets/js/perf-head.js"></script>
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icon-192.png">
    <link rel="stylesheet" href="assets/css/style.css" />
</head>

<body>
    <!-- PRELOADER (istersen kalsın) -->
    <div class="preloader" id="preloader">
        <div class="preloader-logo">Santis Club</div>
    </div>

    <!-- NAVBAR -->
    <div id="navbar-container"></div>

    <main id="nv-main">
        <section class="hero-section products-hero">
            <h1 class="hero-title">Ürünler</h1>
            <p class="products-hero-subtitle">EV SPA KOLEKSİYONU</p>
        </section>

        <div class="section-container" id="products">
            <div class="section-head">
                <h2 class="section-title">Ürünler</h2>
            </div>

            <div class="grid-cards" id="grid-products"></div>
        </div>
    </main>

    <!-- FOOTER -->
    <div id="footer-container"></div>

    <!-- SCRIPTS -->
    <script src="assets/js/loader.js"></script>
    <script src="assets/js/db.js"></script>
    <script src="assets/js/app.js?v=2.1"></script>
    <script src="assets/js/perf-metrics.js" defer></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // loadComp provided by assets/js/loader.js
            loadComp("components/navbar.html", "navbar-container");
            loadComp("components/footer.html", "footer-container");

            // Preloader
            setTimeout(() => {
                const p = document.getElementById('preloader');
                if (p) p.classList.add('hidden');
            }, 600);

            // Category Definitions (Maps to db.js 'cat' field)
            const categories = [
                { id: 'all', label: 'Tümü' },
                { id: 'hammam', label: 'Hamam Ritüeli' },
                { id: 'aroma', label: 'Aromaterapi' },
                { id: 'body', label: 'Vücut Bakımı' },
                { id: 'textile', label: 'Tekstil & Bornoz' },
                { id: 'gift', label: 'Hediye Setleri' },
                { id: 'boutique', label: 'Sothys Butik' }
            ];

            // Render Tabs
            const productsContainer = document.getElementById('products');
            const grid = document.getElementById("grid-products");

            // Insert Tabs HTML before grid if not exists
            if (!document.getElementById('product-tabs')) {
                const tabsEl = document.createElement('div');
                tabsEl.id = 'product-tabs';
                tabsEl.className = 'lux-chip-row';
                tabsEl.style.justifyContent = 'center';
                tabsEl.style.marginBottom = '40px';

                // Get current lang for labels
                const currentLang = 'tr';

                tabsEl.innerHTML = categories.map(c => `
                    <button class="lux-chip ${c.id === 'all' ? 'active' : ''}" 
                            onclick="filterProducts('${c.id}', this)"
                            style="${c.id === 'all' ? 'background:rgba(212,175,55,0.2); border-color:#d4af37;' : ''}">
                        ${c.label}
                    </button>
                `).join('');

                productsContainer.insertBefore(tabsEl, grid);
            }

            // Global Filter Function
            window.filterProducts = (catId, btnElement) => {
                // Update active state
                document.querySelectorAll('#product-tabs .lux-chip').forEach(b => {
                    b.style.background = 'rgba(255,255,255,0.03)';
                    b.style.borderColor = 'rgba(255,255,255,0.1)';
                });
                if (btnElement) {
                    btnElement.style.background = 'rgba(212,175,55,0.2)';
                    btnElement.style.borderColor = '#d4af37';
                }

                renderProducts(catId);
            };

            // Main Render Function
            function renderProducts(filterCat = 'all') {
                const items = window.productsDB || [];
                const currentLang = 'tr';

                // Translation for Button
                const label = "SEPETE EKLE";

                if (!items.length) {
                    grid.innerHTML = `<div style="opacity:.7; padding:40px; text-align:center;">Ürün verisi yok.</div>`;
                    return;
                }

                // Filter
                const filtered = filterCat === 'all'
                    ? items
                    : items.filter(i => i.cat === filterCat);

                if (filtered.length === 0) {
                    grid.innerHTML = `<div style="opacity:.5; padding:40px; text-align:center; width:100%;">Bu kategoride ürün bulunamadı.</div>`;
                    return;
                }

                grid.innerHTML = filtered.map(p => {
                    const name = p.name?.[currentLang] || p.name?.tr || "Ürün";
                    // Fallback to EN if TR desc is missing? Or just empty
                    const desc = p.desc?.[currentLang] || p.desc?.en || "";

                    return `
                    <div class="product-card reveal-on-scroll">
                      <div class="product-img-wrap">
                        <img src="${p.img}" alt="${name}" loading="lazy" decoding="async" width="600" height="600" />
                      </div>
                      <div class="product-content">
                        <div style="display:flex; justify-content:space-between; align-items:start; margin-bottom:0.5rem;">
                            <h3 class="product-title" style="margin:0; font-size:1.1rem;">${name}</h3>
                        </div>
                        <p class="product-desc" style="min-height:40px;">${desc}</p>
                        <div class="product-footer">
                          <span class="product-price">${p.price}€</span>
                          <button onclick='SHOP.addToCart(${JSON.stringify(p).replace(/'/g, "&#39;")})' 
                                  class="product-btn" style="cursor:pointer; font-size:0.8rem; padding:8px 16px;">
                             ${label}
                          </button>
                        </div>
                      </div>
                    </div>
                  `;
                }).join('');
            }

            // Initial Render
            setTimeout(() => {
                renderProducts('all');
            }, 100);
        });
    </script>
    <script src="assets/js/shop.js"></script>
</body>

</html>